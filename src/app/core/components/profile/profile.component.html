<mat-accordion>
  <form #profileForm="ngForm" class="profile-acc">
    <mat-expansion-panel  class="w-800" [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Personal Details
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-form-field class="w-100" appearance="outline">
            <mat-label>First Name</mat-label>
        <input type="text" matInput name="firstName" placeholder="First Name"  minlength="3" maxlength="20" [(ngModel)]="user.firstName" [disabled]="isEditProfile" required>
      </mat-form-field>
    
      <mat-form-field class="w-100" appearance="outline">
            <mat-label>Last Name</mat-label>
        <input type="text" matInput name="lname" placeholder="Last Name" minlength="1" maxlength="20" [(ngModel)]="user.lastName" [disabled]="isEditProfile" required>
      </mat-form-field>
     
      <mat-form-field class="w-100" appearance="outline">
            <mat-label>Email ID</mat-label>
        <input type="email" matInput name="email"  placeholder="Email Id" [(ngModel)]="user.emailId" disabled required>
      </mat-form-field>
  
      <mat-form-field class="w-100" appearance="outline">
            <mat-label>Mobile Number</mat-label>
        <input type="number" matInput name="mobileNo" placeholder="Mobile Number" [(ngModel)]="user.mobileNo" [disabled]="isEditProfile" required>
      </mat-form-field>

      <mat-form-field class="w-100" appearance="outline">
            <mat-label>Location</mat-label>
        <input type="text" matInput name="location" placeholder="Location" minlength="1" maxlength="20" [(ngModel)]="user.location" [disabled]="isEditProfile" required>
      </mat-form-field>

      <div class="flex">
        <button *ngIf="!editBtn"class="changePassword" mat-flat-button color="primary" [disabled]="editBtn" (click)="editProfile()">Edit Profile</button>
        <button *ngIf="editBtn" class="changePassword" mat-flat-button color="primary" (click)="editProfileDone()">Sumbit</button>
        <button *ngIf="editBtn"class="changePassword" mat-flat-button color="primary"  (click)="cancel()">Cancel</button>
      </div>  
    </mat-expansion-panel>
</form>
    <form #passwordForm="ngForm" class="profile-acc">
        <mat-expansion-panel  class="w-800" [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                Change Password
                </mat-panel-title>
            </mat-expansion-panel-header>

            <mat-form-field class="w-100" appearance="outline">
                    <mat-label>Current Password</mat-label>
                    <input type="password" matInput name="currentPassword" #currentPassword="ngModel"  [(ngModel)]="password.currentPassword"  placeholder="Current password" required>
            </mat-form-field>

            <p>
                <mat-form-field class="w-100" appearance="outline">
                    <mat-label>New Password</mat-label>
                    <input type="password" name="newPassword" #newPwd="ngModel" [(ngModel)]="password.newPassword" matInput placeholder="New password" required>
                </mat-form-field>
            </p>
            
            <mat-form-field class="w-100" appearance="outline">
                <mat-label>Confirm Password</mat-label>
                <input type="password" name="cnPassword" #cnPassword="ngModel" [(ngModel)]="password.cnPassword" matInput placeholder="Confirm password" required>
            </mat-form-field>

            <div>
                <button  *ngIf="!changeBtn"class="changePassword" mat-flat-button color="primary" (click)="updatePassword()">Submit</button>
            </div>

            <p>
                <mat-error *ngIf="password.currentPassword.touched && password.currentPassword.invalid">
                    <span *ngIf="password.currentPassword.errors.required">Password is required</span>
                </mat-error>

                <mat-error *ngIf="password.currentPassword.length>0 && user.password!==password.currentPassword">
                <span>Current password is wrong</span>
                </mat-error>

                <mat-error *ngIf="newPwd.touched && newPwd.invalid">
                    <span *ngIf="newPwd.errors.required">New password is required</span>
                </mat-error>

                <mat-error *ngIf="password.newPassword.length > 0 && !pwdRegex.test(password.newPassword)">
                    <span>Password should contain ateast 8 charcters with 1 uppercase, 1 lowercase, 1 digit and 1 special character</span>
                </mat-error>

                <mat-error *ngIf="password.cnPassword.touched && password.cnPassword.invalid">
                    <span *ngIf="password.cnPassword.errors.required">Confirm Password is required</span>
                </mat-error>

                <mat-error *ngIf="(password.newPassword && password.cnPassword) && (password.newPassword !==password.cnPassword )">
                    <span>New password and confirm password should be same</span>
                </mat-error>

                <mat-error *ngIf="(user.password==password.newPassword)">
                        <span>New password should not be same as current password</span>
                    </mat-error>
            </p>
        </mat-expansion-panel>
    </form>
  </mat-accordion>