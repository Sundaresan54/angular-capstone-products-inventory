<div class="mat-elevation-z8 page">
  <h3 class="title">{{productId ? 'Update Product' : 'Add Product'}}</h3>
  <form class="product-form" #productForm="ngForm">
     <mat-form-field>
      <input matInput placeholder="Product Name" #prodName="ngModel" name="name" minlength="2" maxlength="20" [(ngModel)]="product.name" class="form-control" required >
    </mat-form-field>
    <mat-error *ngIf="prodName.touched && prodName.invalid">
      <span *ngIf="prodName.errors.required">Product Name is required</span>
      <span *ngIf="prodName.errors.minlength">Product Name should contain min 2 characters</span>
      <span *ngIf="prodName.errors.maxlength">Product Name cannot exceed 20 characters</span>
    </mat-error>

    <mat-form-field>
      <mat-select placeholder="Select Category" [(value)]="product.category" required>
        <mat-option *ngFor="let category of availableCategories" [value]="category">{{category}}</mat-option>
      </mat-select>
    </mat-form-field>
   <!--  <mat-error *ngIf="cat.touched && cat.invalid">
      <span *ngIf="cat.errors.required">Category is required</span>
    </mat-error> -->
                      
    <mat-form-field>
      <input matInput placeholder="Manufacturer" name="manufacturer" #manufacturer="ngModel" [(ngModel)]="product.manufacturer" required>
    </mat-form-field>
    <mat-error *ngIf="manufacturer.touched && manufacturer.invalid">
      <span *ngIf="manufacturer.errors.required">Manufacturer is required</span>
    </mat-error>
           
    <mat-form-field>
      <textarea matInput placeholder="Description" name="description" [(ngModel)]="product.description"></textarea>
    </mat-form-field>

    <mat-form-field>
      <input matInput placeholder="Image URL" name="image" #image="ngModel" [(ngModel)]="product.image" required>
    </mat-form-field>
    <mat-error *ngIf="image.touched && image.invalid">
      <span *ngIf="image.errors.required">Image URL is required</span>
    </mat-error>

    <mat-form-field>
      <input matInput type="number" placeholder="Price" name="price" #price="ngModel" [(ngModel)]="product.price" min="1" required>
    </mat-form-field>
    <mat-error *ngIf="price.touched && price.invalid">
      <span *ngIf="price.errors.required">Price is required</span>
    </mat-error>

    <mat-form-field>
       <input matInput type="number" placeholder="Quantity" name="quantity" #quantity="ngModel" [(ngModel)]="product.quantity" min="0" required>
    </mat-form-field>
    <mat-error *ngIf="quantity.touched && quantity.invalid">
      <span *ngIf="quantity.errors.required">Quantity is required</span>
    </mat-error>   
    
    <button type="submit" *ngIf="!productId" class="add-product-btn submitBtn" mat-stroked-button color="primary" [disabled]="productForm.invalid ? true :false" (click)="addProduct()">Add Product</button>
    <button type="submit" *ngIf="productId" class="add-product-btn submitBtn" mat-stroked-button color="primary" [disabled]="productForm.invalid ? true :false" (click)="updateProduct()">Update Product</button>
    <button type="submit" class="add-product-btn submitBtn" mat-stroked-button color="accent"(click)="goToHome()">Cancel</button>
</form>
</div>
<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate-multiple"
>
  <p style="font-size: 20px; color: white">Loading...</p>
</ngx-spinner>